<!DOCTYPE html>
<head>
    <title>DAFFMAN - File Browser</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" 
      rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" 
      crossorigin="anonymous">
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" 
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" 
      crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" 
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" 
    crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" 
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" 
    crossorigin="anonymous"></script> -->

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <script src="{{ url_for('static', filename='jquery-3.3.1.slim.min.js') }}" ></script>
    <script src="{{ url_for('static', filename='popper/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}" ></script>  

    
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      .b-example-divider {
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }
      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }
      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }
      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }
      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .form-control {
          color: #fff;
      }

      .form-control:focus {
          color: #fff;
      }


    </style>
</head>
<body style="background-color: #212121; color: white;">
    <!-- As a link -->
    <header class="navbar navbar-expand-md navbar-dark fixed-top" style="background-color: black;">
        <div class="container-fluid">
          <a class="navbar-brand" href="" fill="blue">
            <svg fill="#ffffff" width="48px" height="32px" viewBox="0 0 16 16" id="SVGRepoEditor" 
                xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <path id="SVGRepoEditor" data-name="Path 102" d="M35.5,16h-11A2.5,2.5,0,0,1,22,13.5v-8A2.5,2.5,0,0,1,24.5,3h4A2.5,2.5,0,0,1,31,5.5V6h4.5A2.5,2.5,0,0,1,38,8.5v5A2.5,2.5,0,0,1,35.5,16ZM24.5,4A1.5,1.5,0,0,0,23,5.5v8A1.5,1.5,0,0,0,24.5,15h11A1.5,1.5,0,0,0,37,13.5v-5A1.5,1.5,0,0,0,35.5,7h-5a.5.5,0,0,1-.5-.5v-1A1.5,1.5,0,0,0,28.5,4Z" transform="translate(-22 -3)">
                </path> </svg>
              <span class="fs-4">DAFFMAN&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp; File Browser</span>
          </a>
          <hr>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav me-auto mb-2 mb-md-0">
            </ul>
            <div class="dropdown show">
              <button class="btn dropdown-toggle" type="button" style="color: white" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <svg fill="#ffffff" width="28px" height="32px" 
                viewBox="0 1.5 30.586 30.586" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g transform="translate(-546.269 -195.397)"><path d="M572.138,221.245a15.738,15.738,0,0,0-21.065-.253l-1.322-1.5a17.738,17.738,0,0,1,23.741.28Z"></path><path d="M561.464,204.152a4.96,4.96,0,1,1-4.96,4.96,4.966,4.966,0,0,1,4.96-4.96m0-2a6.96,6.96,0,1,0,6.96,6.96,6.96,6.96,0,0,0-6.96-6.96Z"></path><path d="M561.562,197.4a13.293,13.293,0,1,1-13.293,13.293A13.308,13.308,0,0,1,561.562,197.4m0-2a15.293,15.293,0,1,0,15.293,15.293A15.293,15.293,0,0,0,561.562,195.4Z"></path></g>
                </svg>
                {{ session['username'] }}
              </button>
              <div class="dropdown-menu dropdown-menu-dark" style="color: black;" aria-labelledby="dropdownMenuButton">
                {% if session['username'] == 'admin' %}
                  <a class="dropdown-item" href="/adminstart">Administration</a>
                  <hr style="color: white;">
                {% endif %}
                <a class="dropdown-item" href="/browser">File Browser</a>
                {% if session['username'] != 'admin' %}
                  <a class="dropdown-item" href="/profile">Profile</a>
                {% endif %}
                <a class="dropdown-item" href="/logout">Sign Out</a>
                
              </div>
            </div>
            &nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;
        </div>
      </header>
      <div class="container-fluid">
            <main class="col-md-3 ms-sm-auto col-lg-11 px-md-4" height="100">
              <canvas class="my-4 w-100" id="myChart" width="200" height="5"></canvas>
              <!-- For Debugging: current_dir = {{ current_dir }} -->
              <br>
              <a href="/cd?path={{ rootfolder }}">
                <button class="btn btn-primary rounded-0" type="submit">
                  Root Folder
                </button></a>
               &nbsp;&nbsp;
                {% for x in range(1, numdir): %} 
                <svg fill="#ffffff" width="20px" height="25px" viewBox="0 0 16 16" id="SVGRepoEditor" 
                xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <path id="SVGRepoEditor" data-name="Path 102" d="M35.5,16h-11A2.5,2.5,0,0,1,22,13.5v-8A2.5,2.5,0,0,1,24.5,3h4A2.5,2.5,0,0,1,31,5.5V6h4.5A2.5,2.5,0,0,1,38,8.5v5A2.5,2.5,0,0,1,35.5,16ZM24.5,4A1.5,1.5,0,0,0,23,5.5v8A1.5,1.5,0,0,0,24.5,15h11A1.5,1.5,0,0,0,37,13.5v-5A1.5,1.5,0,0,0,35.5,7h-5a.5.5,0,0,1-.5-.5v-1A1.5,1.5,0,0,0,28.5,4Z" transform="translate(-22 -3)">
                </path> </svg>&nbsp;&nbsp;
                  {{ listdir[x] }}&nbsp;&nbsp;&nbsp;/ &nbsp;
                  {% endfor %}
                
                  
                  <hr>
                <div class="table-responsive">
                  <h3><u>Folders and Directories</u></h3><br>
                    {% if session['editpermit'] == False %}
                      {% if session['username'] == 'admin' and current_dir == rootfolder %}
                          <p class="alert alert-danger">
                            Admins cannot delete user main folder unless during user removal 
                          </p>
                      {% else %}
                          <p class="alert alert-danger">
                            You are not allowed to modify or upload in this directory
                          </p>
                      {% endif %}
                    {% else %}
                        <form action="/md">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <input type="text" name="folder" placeholder="Enter new folder name..." class="form-control rounded-0" style="color: black;"/>
                            </div>
                          </div><br>
                          <div class="input-group">
                            <div class="input-group-prepend col-xs-4">
                              <input type="submit" value="Create New Folder" class="btn btn-primary rounded-0"/>
                              <input type="reset" value="Clear Folder Name" class="btn btn-secondary rounded-0">
                            </div>  
                          </div>
                        </form><br>
                    {% endif %}
                    {% if folderexist == True %}
                      <p class="alert alert-danger rounded-0">Folder Already Exists<br>
                        Note: Similar folder name
                      </p>
                    {% endif %}
                    {% if foldermissing == True %}
                      <p class="alert alert-danger rounded-0">No folder name entered<br>
                      </p>
                    {% endif %}
                    {% if foldersuccess == True %}
                      <p class="alert alert-success rounded-0">Folder Successfully Created<br>
                        Folder created: {{ foldercreated }}
                      </p>
                    {% endif %}

                  
                  <!-- For Debugging: editpermit = {{ session['editpermit'] }}<br>
                      For debugging: sessionuser = {{session['username']}}<br>
                      For debugging: rootfolder  = {{ rootfolder }} <br>
                      For debugging: current_dir = {{ current_dir }} -->
                  <table class="table table-dark">
                    <thead>
                      <th scope="col">Folder</th>
                      <th scope="col">Action</th>
                    </thead>
                    {% if current_dir != rootfolder %}
                    <tr>
                      <td>
                          <a href="/cd?path=..">
                            <button class="btn btn-primary" type="submit" fill="red">
                              .. (Parent Folder)
                            </button>
                          </a>
                      </td>
                      <td></td>
                    </tr>
                    {% endif %}
                        {% if current_dir == rootfolder %}
                              <tr>
                              {% if session['username'] == 'admin' %}
                                  <td><b>[+] Administration Folder</b></td>
                                
                                    <td></td>
                                    </tr>
                                    <tr>
                                      <td>
                                        <svg fill="#ffffff" width="25px" height="25px" viewBox="0 0 16 16" id="SVGRepoEditor" 
                                              xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                                              <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <path id="SVGRepoEditor" data-name="Path 102" d="M35.5,16h-11A2.5,2.5,0,0,1,22,13.5v-8A2.5,2.5,0,0,1,24.5,3h4A2.5,2.5,0,0,1,31,5.5V6h4.5A2.5,2.5,0,0,1,38,8.5v5A2.5,2.5,0,0,1,35.5,16ZM24.5,4A1.5,1.5,0,0,0,23,5.5v8A1.5,1.5,0,0,0,24.5,15h11A1.5,1.5,0,0,0,37,13.5v-5A1.5,1.5,0,0,0,35.5,7h-5a.5.5,0,0,1-.5-.5v-1A1.5,1.5,0,0,0,28.5,4Z" transform="translate(-22 -3)">
                                              </path></svg>&nbsp;&nbsp;
                                        <a href="/cd?path={{current_dir + '/' + session['username']}}">
                                          {{ session['username'] + '/' }}
                                        </a>
                                      </td>
                                    <td>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                      <b>[+] Other Folders</b>
                                    </td>
                                    <td></td>
                                  </tr>
                                  
                                  {% for item in files[0: -1] %}
                                  <tr>
                                    {% if '.' not in item %}
                                      {% if item != session['username'] %}
                                          <td>
                                          <svg fill="#ffffff" width="25px" height="25px" viewBox="0 0 16 16" id="SVGRepoEditor" 
                                          xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                                          <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <path id="SVGRepoEditor" data-name="Path 102" d="M35.5,16h-11A2.5,2.5,0,0,1,22,13.5v-8A2.5,2.5,0,0,1,24.5,3h4A2.5,2.5,0,0,1,31,5.5V6h4.5A2.5,2.5,0,0,1,38,8.5v5A2.5,2.5,0,0,1,35.5,16ZM24.5,4A1.5,1.5,0,0,0,23,5.5v8A1.5,1.5,0,0,0,24.5,15h11A1.5,1.5,0,0,0,37,13.5v-5A1.5,1.5,0,0,0,35.5,7h-5a.5.5,0,0,1-.5-.5v-1A1.5,1.5,0,0,0,28.5,4Z" transform="translate(-22 -3)">
                                          </path></svg>&nbsp;&nbsp;
                                          <a href="/cd?path={{current_dir + '/' + item}}">{{item + '/'}}</a></td>
                                          <td></td>
                                      {% endif %}
                                    {% endif %}
                                  </tr>
                                  {% endfor %}
                                  
                              {% else %}
                                  <td><b>[+] My Folder</b></td>
                                  <td></td>
                                  </tr>
                                  <tr>
                                    <td>
                                      <svg fill="#ffffff" width="25px" height="25px" viewBox="0 0 16 16" id="SVGRepoEditor" 
                                            xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <path id="SVGRepoEditor" data-name="Path 102" d="M35.5,16h-11A2.5,2.5,0,0,1,22,13.5v-8A2.5,2.5,0,0,1,24.5,3h4A2.5,2.5,0,0,1,31,5.5V6h4.5A2.5,2.5,0,0,1,38,8.5v5A2.5,2.5,0,0,1,35.5,16ZM24.5,4A1.5,1.5,0,0,0,23,5.5v8A1.5,1.5,0,0,0,24.5,15h11A1.5,1.5,0,0,0,37,13.5v-5A1.5,1.5,0,0,0,35.5,7h-5a.5.5,0,0,1-.5-.5v-1A1.5,1.5,0,0,0,28.5,4Z" transform="translate(-22 -3)">
                                            </path></svg>&nbsp;&nbsp;
                                      <a href="/cd?path={{current_dir + '/' + session['username']}}">
                                        {{ session['username'] + '/' }}
                                      </a>
                                    </td>
                                    <td>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                      <b>[+] Administration Folder</b>
                                    </td>
                                    <td></td>
                                  </tr>
                                  <tr>
                                    {% for item in files[0: -1] %}
                                      {% if '.' not in item  %}
                                        {% if "admin" in item %}
                                          <td>
                                            <svg fill="#ffffff" width="25px" height="25px" viewBox="0 0 16 16" id="SVGRepoEditor" 
                                            xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <path id="SVGRepoEditor" data-name="Path 102" d="M35.5,16h-11A2.5,2.5,0,0,1,22,13.5v-8A2.5,2.5,0,0,1,24.5,3h4A2.5,2.5,0,0,1,31,5.5V6h4.5A2.5,2.5,0,0,1,38,8.5v5A2.5,2.5,0,0,1,35.5,16ZM24.5,4A1.5,1.5,0,0,0,23,5.5v8A1.5,1.5,0,0,0,24.5,15h11A1.5,1.5,0,0,0,37,13.5v-5A1.5,1.5,0,0,0,35.5,7h-5a.5.5,0,0,1-.5-.5v-1A1.5,1.5,0,0,0,28.5,4Z" transform="translate(-22 -3)">
                                            </path></svg>&nbsp;&nbsp;
                                            <a href="/cd?path={{current_dir + '/' + item}}">{{item + '/'}}</a>
                                          </td>
                                        {%endif %}
                                      {% endif %}
                                    {% endfor %}
                                    <td></td>
                                  </tr>
                                  <tr>
                                    <td>
                                      <b>[+] Other Folders</b>
                                    </td>
                                    <td></td>
                                  </tr>
                                  {% for item in files[0: -1] %}
                                    <tr>
                                    {% if '.' not in item  %}
                                      {% if item != session['username'] and "admin" not in item %}
                                          <td>
                                            <svg fill="#ffffff" width="25px" height="25px" viewBox="0 0 16 16" id="SVGRepoEditor" 
                                            xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <path id="SVGRepoEditor" data-name="Path 102" d="M35.5,16h-11A2.5,2.5,0,0,1,22,13.5v-8A2.5,2.5,0,0,1,24.5,3h4A2.5,2.5,0,0,1,31,5.5V6h4.5A2.5,2.5,0,0,1,38,8.5v5A2.5,2.5,0,0,1,35.5,16ZM24.5,4A1.5,1.5,0,0,0,23,5.5v8A1.5,1.5,0,0,0,24.5,15h11A1.5,1.5,0,0,0,37,13.5v-5A1.5,1.5,0,0,0,35.5,7h-5a.5.5,0,0,1-.5-.5v-1A1.5,1.5,0,0,0,28.5,4Z" transform="translate(-22 -3)">
                                            </path></svg>&nbsp;&nbsp;
                                            <a href="/cd?path={{current_dir + '/' + item}}">{{item + '/'}}</a>
                                          </td>
                                          <td></td>
                                      {% endif %}
                                    {% endif %}
                                  {% endfor %}
                                </tr>
                              {% endif %}
                        {% elif current_dir != rootfolder %}
                          {% for item in files[0: -1] %}
                            <tr>
                            {% if '.' not in item  %}
                              {% if item != session['username'] %}
                                  <td>
                                  <svg fill="#ffffff" width="25px" height="25px" viewBox="0 0 16 16" id="SVGRepoEditor" 
                                  xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0">
                                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <path id="SVGRepoEditor" data-name="Path 102" d="M35.5,16h-11A2.5,2.5,0,0,1,22,13.5v-8A2.5,2.5,0,0,1,24.5,3h4A2.5,2.5,0,0,1,31,5.5V6h4.5A2.5,2.5,0,0,1,38,8.5v5A2.5,2.5,0,0,1,35.5,16ZM24.5,4A1.5,1.5,0,0,0,23,5.5v8A1.5,1.5,0,0,0,24.5,15h11A1.5,1.5,0,0,0,37,13.5v-5A1.5,1.5,0,0,0,35.5,7h-5a.5.5,0,0,1-.5-.5v-1A1.5,1.5,0,0,0,28.5,4Z" transform="translate(-22 -3)">
                                  </path></svg>&nbsp;&nbsp;
                                  <a href="/cd?path={{current_dir + '/' + item}}">{{item + '/'}}</a></td>
                                  {% if session['editpermit'] == True %}
                                      <td>
                                        <a href="/delete_dir?dir={{current_dir + '/' + item}}">
                                        <button class="btn btn-danger rounded-0" type="submit" fill="red">
                                          Remove Directory
                                        </button></a>
                                      </td>
                                  {% else %}
                                      <td></td>
                                  {% endif %}
                                  <td></td>
                              {% endif %}
                            {% endif %}
                          {% endfor %}
                        {% endif %}

                                                
                          </tr>
                  </table>
                  <p> {{ numfolder }} entries found </p>

<!-- ------------------------------   -->

              <a id="files"></a>
                  <br><br>
                  <hr size="10">
            {% if current_dir != rootfolder %}
                        <h3><u>Files</u></h3><br>
                        {% if session['editpermit'] == True %}
                          <a href="/startupload">
                            <div class="input-group">
                              <div class="input-group-prepend col-xs-4">
                                <button class="btn btn-primary rounded-0">
                                  Upload New File
                                </button>
                              </div>  
                            </div>
                            <br>
                          </a>
                        {% endif %}
                        {% if fileexist == True %}
                          <p class="alert alert-danger rounded-0">File Already Exists<br>
                            Note: Similar file name and MD5 found 
                          </p>
                        {% endif %}
                        {% if filemissing == True %}
                          <p class="alert alert-danger rounded-0">No file selected<br>
                          </p>
                        {% endif %}
                        {% if filesuccess == True %}
                          <p class="alert alert-success rounded-0">File Successfully Uploaded<br>
                            File Uploaded: {{ fileuploaded }} <br>
                          </p>
                        {% endif %}
                        {% if session['downloadpass'] == False %}
                        <p class="alert alert-danger rounded-0">
                          Password mismatched. Please re-enter password
                        </p>
                        {% endif %}
                        <table class="table table-dark">
                          <thead>
                            <th scope="col">File</th>
                            <th scope="col">Size</th>
                            <th scope="col">md5</th> 
                            <th scope="col">File Owner</th>  
                            <th scope="col">Actions</th>
                            <th scope="col"></th>
                          </thead>
                      {% for item in hash_list %}
                          {% if '.' in item[0]  %}
                                  <td>
                                    <svg fill="#ffffff" height="28px" width="28px" version="1.1" id="XMLID_33_" 
                                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                    viewBox="0 0 24 24" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                    <g id="SVGRepo_iconCarrier"> <g id="document-locked"><g>
                                    <polygon points="23,24 15,24 15,22 21,22 21,6.4 16.6,2 5,2 5,8 3,8 3,0 17.4,0 23,5.6 "></polygon> </g> <g> <polygon points="22,8 15,8 15,2 17,2 17,6 22,6 "></polygon> </g> <g> <path d="M13,24H1V14h12V24z M3,22h8v-6H3V22z M8,20H6v-2h2V20z"></path> </g> <g> <path d="M11,16H3v-3c0-2.2,1.8-4,4-4s4,1.8,4,4V16z M5,14h4v-1c0-1.1-0.9-2-2-2s-2,0.9-2,2V14z">
                                    </path> </g> </g> </g></svg>
                                    &nbsp;&nbsp;&nbsp;
                                    {{ item[0] }}
                                  </td>
                                  <!-- file size -->
                                  <td>{{ item[1] }} KB</td>
                                  <!-- file hash -->
                                  <td>{{ item[2] }}</td>
                                  <td>{{ item[3] }}</td>
                                  <td>
                                    <a class="open-decryptPass btn btn-primary rounded-0" data-toggle="modal" data-id="{{ item[0] }}" href="#decryptPass">
                                    Download
                                    </a>
                                    <div class="modal fade hide" id="decryptPass" tabindex="-1" role="dialog">
                                      <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content" style="color: black">
                                            <div class="modal-header">
                                              <h5 class="modal-title" id="exampleModalLongTitle">Downloading file...</h5>
                                            </div>
                                            <form method="POST" action="/download">
                                              <div class="modal-body">
                                                <p>Downloaded File</p>
                                                <input type="text" id="downloadfile" name="downloadfile" value="" class="form-control rounded-0" style="color: black;" readonly>
                                                
                                                <br><p>Enter Decryption Password</p>
                                                <input type="password" id="password" name="password" placeholder="Encryption Password" class="form-control rounded-0" style="color: black;">
                                              </div>
                                              <div class="modal-footer">
                                                  <button type="submit" class="btn btn-success">
                                                    Decrypt and Download File
                                                  </button>
                                                  <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">[X] Close</span>
                                                  </button>
                                              </div>
                                            </form>
                                        </div>
                                      </div>
                                    </div>
                                  </td>

                                      {% if session['username'] == 'admin' %}
                                        <td><a href="/delete?file={{current_dir + '/' + item[0]}}">
                                          <button class="btn btn-danger rounded-0" type="submit" fill="red">
                                            Delete
                                            </button></a>
                                        </td>
                                      {% else %}
                                        {% if session['editpermit'] == True %}
                                          <td><a href="/delete?file={{current_dir + '/' + item[0]}}">
                                            <button class="btn btn-danger rounded-0" type="submit" fill="red">
                                              Delete
                                              </button></a>
                                          </td>
                                        {% else %}
                                          <td></td>
                                        {% endif %}
                                      {% endif %}
                                  <td></td>
                                <!-- unreadable file for download only -->
                                <!-- unreadable file for download only -->
                          {% endif %}
                          </tr>
                      {% endfor %}
                        </table>
                        <p>{{ numfiles }} entries found</p>
                      </div>
                    </a>
                    
            {% endif %}
            <!-- file password input -->

            <script>
              $(document).on("click", ".open-decryptPass", function ()
              {
                  var filePass = $(this).data('id');
                  $(".modal-body #downloadfile").val(filePass);
                  
                  // As pointed out in comments, 
                  // it is unnecessary to have to manually call the modal.
                  // $('#addBookDialog').modal('show');
              });
            </script>
            
<!-- ========================================================================================================== -->
                <br><br>
                <footer style="text-align: center;">
                  <p>2023 &copy; Created by Muhammad Danial using Python Flask and Bootstrap.<br>The Github repository is 
                    <a href="https://github.com/dandeviant/Flask-file-manager" target="_blank">open to public </a>
                  </p>
                </footer> 
                <br>
              <!-- <canvas class="my-4 w-100" id="myChart" width="300" height="1"></canvas> -->
            </main>
      </div> 

</body>
</html>